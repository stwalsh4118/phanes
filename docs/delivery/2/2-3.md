# 2-3 Create profile package

[Back to task list](./tasks.md)

## Description

Create a profile package (`internal/profile/profile.go`) that defines server profiles as lists of module names and provides lookup functionality.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-01-27 00:00:00 | Created | N/A | Proposed | Task file created | sean |

## Requirements

1. Package located at `internal/profile/profile.go`
2. Define profiles map:
   - `minimal`: baseline, user, security, swap, updates
   - `dev`: baseline, user, security, swap, updates, docker, monitoring, devtools
   - `web`: baseline, user, security, swap, updates, docker, monitoring, caddy
   - `database`: baseline, user, security, swap, updates, docker, monitoring, postgres, redis
   - `coolify`: baseline, user, security, swap, updates, docker, coolify
3. Functions:
   - `GetProfile(name string) ([]string, error)` - Get module list for profile
   - `ListProfiles() []string` - List all available profile names
   - `ProfileExists(name string) bool` - Check if profile exists

## Implementation Plan

1. Create `internal/profile/` directory
2. Create `profile.go` with package declaration
3. Define `profiles` map as package-level variable:
   ```go
   var profiles = map[string][]string{
       "minimal": {...},
       "dev": {...},
       ...
   }
   ```
4. Implement `GetProfile()`:
   - Look up profile in map
   - Return module list or error if not found
5. Implement `ListProfiles()`:
   - Extract keys from map
   - Return sorted list
6. Implement `ProfileExists()`:
   - Check if key exists in map
7. Add godoc comments
8. Add basic unit tests

## Verification

1. `GetProfile()` returns correct module list for valid profiles
2. `GetProfile()` returns error for invalid profiles
3. `ListProfiles()` returns all profile names
4. `ProfileExists()` correctly identifies existing/non-existing profiles
5. Unit tests pass

## Files Modified

- `internal/profile/profile.go` (new)
- `internal/profile/profile_test.go` (new)

