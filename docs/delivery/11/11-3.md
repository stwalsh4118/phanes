# 11-3 Register Module and Update Examples

[Back to task list](./tasks.md)

## Description

Register the Tailscale module in `main.go` and update `config.yaml.example` with Tailscale configuration options.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-01-27 00:00:00 | Created | N/A | Proposed | Task file created | sean |
| 2025-01-27 00:00:00 | Status Update | Proposed | InProgress | Starting implementation | sean |
| 2025-01-27 00:00:00 | Status Update | InProgress | Review | Implementation complete - registered module and updated config example | sean |
| 2025-01-27 00:00:00 | Status Update | Review | Done | Task completed and approved | sean |

## Requirements

1. Register Tailscale module in `main.go` `registerAllModules()` function
2. Import Tailscale module package
3. Add module registration: `r.RegisterModule(&tailscale.TailscaleModule{})`
4. Update `config.yaml.example` with Tailscale section:
   - `enabled: false`
   - `auth_key: ""` with comment about getting from Tailscale admin console

## Implementation Plan

1. Open `main.go` file
2. Add import for `github.com/stwalsh4118/phanes/internal/modules/tailscale`
3. Add `r.RegisterModule(&tailscale.TailscaleModule{})` in `registerAllModules()` function (after other module registrations)
4. Open `config.yaml.example` file
5. Add Tailscale section with:
   - Comment explaining what Tailscale is
   - `enabled: false` with comment
   - `auth_key: ""` with comment explaining how to get auth key

## Verification

1. Module is registered and appears in `--list` output
2. Module can be selected and executed via CLI
3. `config.yaml.example` includes Tailscale section with proper formatting
4. Example config follows existing patterns and style

## Files Modified

- `main.go` - Register Tailscale module (added import and module registration)
- `config.yaml.example` - Add Tailscale configuration example (enabled, auth_key, skip_auth)
- `docs/api-specs/infrastructure/infrastructure-api.md` - Updated Tailscale struct documentation with SkipAuth field

