# 8-4 Implement module selection parsing

[Back to task list](./tasks.md)

## Description

Parse comma-separated module list from `--modules` flag, validate module names exist in registry, and handle errors gracefully. This enables users to select specific modules to run.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-01-27 00:00:00 | Created | N/A | Proposed | Task file created | sean |

## Requirements

1. Parse comma-separated string from `--modules` Cobra flag
2. Split by comma and trim whitespace
3. Validate each module name exists (will need access to module registry or runner)
4. Handle empty/invalid module names
5. Return list of validated module names
6. Log selected modules
7. Handle duplicate module names (deduplicate)

## Implementation Plan

1. Create `parseModuleList(moduleStr string) ([]string, error)` function in `main.go`
2. Split string by comma: `strings.Split(moduleStr, ",")`
3. Trim whitespace from each module name: `strings.TrimSpace()`
4. Filter out empty strings
5. Deduplicate module names (use map or check for duplicates)
6. Validate module names exist:
   - Need to check against module registry
   - For now, can defer validation to runner (runner will handle unknown modules)
   - OR: Create helper to get available modules from runner
7. Log info message showing selected modules
8. Return module list
9. Call `parseModuleList()` from `runCommand()` when `--modules` Cobra flag is set

## Verification

1. Comma-separated module list parses correctly
2. Whitespace is trimmed from module names
3. Empty strings are filtered out
4. Duplicate modules are removed
5. Module list is logged correctly
6. Empty module list is handled gracefully

## Test Plan

1. **Valid modules**: Test with "baseline,user,security", verify parsing
2. **Whitespace**: Test with "baseline , user , security", verify trimming
3. **Duplicates**: Test with "baseline,baseline,user", verify deduplication
4. **Empty strings**: Test with "baseline,,user", verify empty filtered
5. **Single module**: Test with "baseline", verify works
6. **Empty flag**: Test with empty string, verify handled

## Files Modified

- `main.go` (updated)

