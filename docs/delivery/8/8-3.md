# 8-3 Implement profile selection and validation

[Back to task list](./tasks.md)

## Description

Implement profile selection logic that validates the profile exists, resolves module names from the profile, and handles errors gracefully. This connects the profile package to the CLI.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-01-27 00:00:00 | Created | N/A | Proposed | Task file created | sean |

## Requirements

1. Use `profile.GetProfile(name)` from `internal/profile` package
2. Validate profile exists before using it
3. Handle profile not found errors with clear messages
4. Return list of module names from profile
5. Log profile selection and module list
6. Use `profile.ProfileExists()` or check error from `GetProfile()`

## Implementation Plan

1. Create `getProfileModules(profileName string) ([]string, error)` function in `main.go`
2. Validate profile exists:
   - Option 1: Call `profile.ProfileExists(profileName)` first
   - Option 2: Call `profile.GetProfile(profileName)` and check error
3. If profile doesn't exist:
   - Log error with available profiles list
   - Return error
4. If profile exists:
   - Call `profile.GetProfile(profileName)`
   - Log info message showing selected profile and modules
   - Return module list
5. Call `getProfileModules()` from `runCommand()` when `--profile` Cobra flag is set
6. Store module list for later execution

## Verification

1. Valid profile name resolves to correct module list
2. Invalid profile name shows clear error with available profiles
3. Profile selection is logged correctly
4. Module list is returned correctly
5. Error handling is graceful

## Test Plan

1. **Valid profile**: Test with "minimal" profile, verify correct modules returned
2. **Invalid profile**: Test with "nonexistent", verify error message
3. **Profile listing**: Verify error message includes available profiles
4. **Module logging**: Verify selected modules are logged

## Files Modified

- `main.go` (updated)

