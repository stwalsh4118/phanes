# 7-5 Implement DevTools module - Go

[Back to task list](./tasks.md)

## Description

Implement helper functions for installing Go from the official source. Go is downloaded, extracted, and configured system-wide.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-01-27 00:00:00 | Created | N/A | Proposed | Task file created | sean |

## Requirements

1. Create helper functions in `internal/modules/devtools/go.go`:
   - `installGo(cfg *config.Config) error` - Installs Go
   - `goInstalled(version string) (bool, error)` - Checks if Go version is installed

2. Install Go:
   - Determine architecture: `dpkg --print-architecture` or `uname -m`
   - Map architecture to Go architecture (amd64, arm64, etc.)
   - Download Go tarball from `https://go.dev/dl/go<version>.linux-<arch>.tar.gz`
   - Use version from `cfg.DevTools.GoVersion` (default "1.24")
   - Extract to `/usr/local/go` (remove old installation if exists)
   - Configure PATH in shell profile (`.bashrc` and `.zshrc`): `export PATH=$PATH:/usr/local/go/bin`
   - Verify installation: `go version`

3. Shell profile configuration:
   - Append Go PATH to `.bashrc` and `.zshrc` if not already present
   - Check for existing Go PATH entries to avoid duplicates
   - Pattern: `export PATH=$PATH:/usr/local/go/bin`
   - Also set `GOROOT` if needed: `export GOROOT=/usr/local/go`

4. Idempotency:
   - Check if Go is already installed before installing
   - Check if installed version matches requested version
   - Return early if already configured with correct version

5. Error handling:
   - Handle architecture detection errors
   - Handle download errors
   - Handle extraction errors
   - Handle shell profile write errors
   - Return descriptive errors

6. Logging:
   - Use `log.Info()` for progress messages
   - Use `log.Success()` when installation completes
   - Use `log.Skip()` when already installed
   - Log Go version after installation

7. Dry-run support:
   - Check dry-run mode from logging package
   - Log what would be done but don't execute commands

## Implementation Plan

1. Create `internal/modules/devtools/go.go`
2. Implement helper functions for checking Go installation
3. Implement architecture detection and mapping
4. Implement `installGo()` function
5. Implement shell profile configuration helpers
6. Add proper error handling and logging
7. Add dry-run support

## Verification

1. Functions compile without errors
2. Go installation works correctly
3. Architecture detection works correctly
4. Shell profile configuration works correctly
5. Idempotency works (can run multiple times safely)
6. Error handling works correctly
7. Dry-run mode is respected

## Files Modified

- `internal/modules/devtools/go.go` (new) - Go installation functions


